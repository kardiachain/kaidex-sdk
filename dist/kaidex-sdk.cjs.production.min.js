"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("kardia-js-sdk"),n=e(t),a=e(require("jsbi")),r=e(require("decimal.js-light")),i=e(require("big.js")),s=e(require("toformat")),u=require("bignumber.js");function o(e,t,n,a,r,i,s){try{var u=e[i](s),o=u.value}catch(e){return void n(e)}u.done?t(o):Promise.resolve(o).then(a,r)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){o(i,a,r,s,u,"next",e)}function u(e){o(i,a,r,s,u,"throw",e)}s(void 0)}))}}function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function y(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function l(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m,c,f,T,h=(function(e){var t=function(e){var t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function o(e,t,n,a){var r=Object.create((t&&t.prototype instanceof y?t:y).prototype),i=new g(a||[]);return r._invoke=function(e,t,n){var a="suspendedStart";return function(r,i){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw i;return{value:void 0,done:!0}}for(n.method=r,n.arg=i;;){var s=n.delegate;if(s){var u=w(s,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var o=p(e,t,n);if("normal"===o.type){if(a=n.done?"completed":"suspendedYield",o.arg===d)continue;return{value:o.arg,done:n.done}}"throw"===o.type&&(a="completed",n.method="throw",n.arg=o.arg)}}}(e,n,i),r}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=o;var d={};function y(){}function l(){}function m(){}var c={};c[r]=function(){return this};var f=Object.getPrototypeOf,T=f&&f(f(I([])));T&&T!==t&&n.call(T,r)&&(c=T);var h=m.prototype=y.prototype=Object.create(c);function v(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var a;this._invoke=function(r,i){function s(){return new t((function(a,s){!function a(r,i,s,u){var o=p(e[r],e,i);if("throw"!==o.type){var d=o.arg,y=d.value;return y&&"object"==typeof y&&n.call(y,"__await")?t.resolve(y.__await).then((function(e){a("next",e,s,u)}),(function(e){a("throw",e,s,u)})):t.resolve(y).then((function(e){d.value=e,s(d)}),(function(e){return a("throw",e,s,u)}))}u(o.arg)}(r,i,a,s)}))}return a=a?a.then(s,s):s()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var a=p(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function g(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:x}}function x(){return{value:void 0,done:!0}}return l.prototype=h.constructor=m,m.constructor=l,l.displayName=u(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===l||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,s,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},v(b.prototype),b.prototype[i]=function(){return this},e.AsyncIterator=b,e.async=function(t,n,a,r,i){void 0===i&&(i=Promise);var s=new b(o(t,n,a,r),i);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},v(h),u(h,s,"Generator"),h[r]=function(){return this},h.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=I,g.prototype={constructor:g,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return s.type="throw",s.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),o=n.call(i,"finallyLoc");if(u&&o){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!o)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;k(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}(T={exports:{}}),T.exports),v={ROUTER:[{inputs:[{internalType:"address",name:"_factory",type:"address"},{internalType:"address",name:"_WKAI",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{stateMutability:"payable",type:"fallback"},{inputs:[],name:"WKAI",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"},{internalType:"uint256",name:"amountADesired",type:"uint256"},{internalType:"uint256",name:"amountBDesired",type:"uint256"},{internalType:"uint256",name:"amountAMin",type:"uint256"},{internalType:"uint256",name:"amountBMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"addLiquidity",outputs:[{internalType:"uint256",name:"amountA",type:"uint256"},{internalType:"uint256",name:"amountB",type:"uint256"},{internalType:"uint256",name:"liquidity",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amountTokenDesired",type:"uint256"},{internalType:"uint256",name:"amountTokenMin",type:"uint256"},{internalType:"uint256",name:"amountKAIMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"addLiquidityKAI",outputs:[{internalType:"uint256",name:"amountToken",type:"uint256"},{internalType:"uint256",name:"amountKAI",type:"uint256"},{internalType:"uint256",name:"liquidity",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"reserveIn",type:"uint256"},{internalType:"uint256",name:"reserveOut",type:"uint256"}],name:"getAmountIn",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"reserveIn",type:"uint256"},{internalType:"uint256",name:"reserveOut",type:"uint256"}],name:"getAmountOut",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"}],name:"getAmountsIn",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"}],name:"getAmountsOut",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"}],name:"getReserves",outputs:[{internalType:"uint256",name:"reserveA",type:"uint256"},{internalType:"uint256",name:"reserveB",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amountA",type:"uint256"},{internalType:"uint256",name:"reserveA",type:"uint256"},{internalType:"uint256",name:"reserveB",type:"uint256"}],name:"quote",outputs:[{internalType:"uint256",name:"amountB",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountAMin",type:"uint256"},{internalType:"uint256",name:"amountBMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"removeLiquidity",outputs:[{internalType:"uint256",name:"amountA",type:"uint256"},{internalType:"uint256",name:"amountB",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountTokenMin",type:"uint256"},{internalType:"uint256",name:"amountKAIMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"removeLiquidityKAI",outputs:[{internalType:"uint256",name:"amountToken",type:"uint256"},{internalType:"uint256",name:"amountKAI",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountTokenMin",type:"uint256"},{internalType:"uint256",name:"amountETHMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"removeLiquidityKAISupportingFeeOnTransferTokens",outputs:[{internalType:"uint256",name:"amountKAI",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactKAIForTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactKAIForTokensSupportingFeeOnTransferTokens",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactTokensForKAI",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactTokensForKAISupportingFeeOnTransferTokens",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactTokensForTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactTokensForTokensSupportingFeeOnTransferTokens",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapKAIForExactTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"amountInMax",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapTokensForExactKAI",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"amountInMax",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapTokensForExactTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"}],name:"swapWithLimitOrder",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],FACTORY:[{inputs:[{internalType:"address",name:"_feeToSetter",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint8",name:"tier",type:"uint8"}],name:"AddToken",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token0",type:"address"},{indexed:!0,internalType:"address",name:"token1",type:"address"},{indexed:!1,internalType:"address",name:"pair",type:"address"},{indexed:!1,internalType:"uint256",name:"",type:"uint256"}],name:"PairCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"pair",type:"address"}],name:"RemovePair",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint8",name:"tier",type:"uint8"}],name:"RemoveToken",type:"event"},{constant:!0,inputs:[],name:"INIT_CODE_PAIR_HASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"uint8",name:"_tier",type:"uint8"},{internalType:"address",name:"_token",type:"address"}],name:"addToken",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"allPairs",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"allPairsLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"}],name:"createPair",outputs:[{internalType:"address",name:"pair",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"feeTo",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"feeToSetter",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"uint8",name:"_tier",type:"uint8"}],name:"getAllTierTokens",outputs:[{internalType:"address[]",name:"",type:"address[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"getPair",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"uint8",name:"_tier",type:"uint8"},{internalType:"address",name:"_token",type:"address"}],name:"removeToken",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_feeTo",type:"address"}],name:"setFeeTo",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_feeToSetter",type:"address"}],name:"setFeeToSetter",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"uint8",name:"",type:"uint8"},{internalType:"uint256",name:"",type:"uint256"}],name:"tierTokens",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"}],KRC20:[{inputs:[{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"burn",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"}],name:"nonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"tokenSwap",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],LIMIT_ORDER:[{inputs:[{internalType:"address",name:"_swap",type:"address"},{internalType:"address",name:"_factory",type:"address"},{internalType:"address",name:"_wkai",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"trader",type:"address"},{indexed:!1,internalType:"address",name:"pair",type:"address"},{indexed:!1,internalType:"uint256",name:"orderId",type:"uint256"}],name:"CancelOrder",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"trader",type:"address"},{indexed:!1,internalType:"address",name:"pair",type:"address"},{indexed:!1,internalType:"uint256",name:"inputAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"outputAmount",type:"uint256"},{indexed:!1,internalType:"enum Types.OrderType",name:"swapType",type:"uint8"},{indexed:!1,internalType:"uint256",name:"orderId",type:"uint256"},{indexed:!1,internalType:"enum SwapSettlement.TradeType",name:"tradeType",type:"uint8"}],name:"Orders",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[],name:"Pause",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"trader",type:"address"},{indexed:!1,internalType:"string",name:"reason",type:"string"}],name:"SwapFailed",type:"event"},{anonymous:!1,inputs:[],name:"Unpause",type:"event"},{inputs:[{internalType:"address",name:"_pair",type:"address"},{internalType:"uint256",name:"_orderId",type:"uint256"}],name:"cancelOrder",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_pair",type:"address"}],name:"fill",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getFactory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_pair",type:"address"}],name:"getOrders",outputs:[{components:[{internalType:"address",name:"trader",type:"address"},{internalType:"enum Types.OrderType",name:"orderType",type:"uint8"},{components:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],internalType:"struct Types.TokenAmount",name:"input",type:"tuple"},{components:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],internalType:"struct Types.TokenAmount",name:"output",type:"tuple"},{internalType:"uint256",name:"orderId",type:"uint256"}],internalType:"struct Types.Order[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"isOwner",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_outputToken",type:"address"},{internalType:"uint256",name:"_outputAmount",type:"uint256"},{internalType:"enum Types.OrderType",name:"_orderType",type:"uint8"},{internalType:"enum SwapSettlement.TradeType",name:"_type",type:"uint8"}],name:"orderInputKAI",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"_inputToken",type:"address"},{internalType:"uint256",name:"_inputAmount",type:"uint256"},{internalType:"address",name:"_outputToken",type:"address"},{internalType:"uint256",name:"_outputAmount",type:"uint256"},{internalType:"enum Types.OrderType",name:"_orderType",type:"uint8"},{internalType:"enum SwapSettlement.TradeType",name:"_type",type:"uint8"}],name:"orderInputTokens",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"pendingOrder",outputs:[{internalType:"address",name:"trader",type:"address"},{internalType:"enum Types.OrderType",name:"orderType",type:"uint8"},{components:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],internalType:"struct Types.TokenAmount",name:"input",type:"tuple"},{components:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],internalType:"struct Types.TokenAmount",name:"output",type:"tuple"},{internalType:"uint256",name:"orderId",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"swap",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"trader",type:"address"},{internalType:"enum Types.OrderType",name:"orderType",type:"uint8"},{components:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],internalType:"struct Types.TokenAmount",name:"input",type:"tuple"},{components:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],internalType:"struct Types.TokenAmount",name:"output",type:"tuple"},{internalType:"uint256",name:"orderId",type:"uint256"}],internalType:"struct Types.Order",name:"_order",type:"tuple"},{internalType:"address",name:"_pair",type:"address"}],name:"trySwap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"wkai",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}]},b=function(e){var t=this,n=e.abi,a=e.smcAddress,r=e.client;this.smcCallData=function(){var e=p(h.mark((function e(n){var a,r,i,s;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.contractAddr,r=n.methodName,i=n.params,t.kardiaContract.updateAbi(n.abi),e.next=4,t.kardiaContract.invokeContract(r,i);case 4:return s=e.sent,e.next=7,s.call(a,{},"latest");case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.abi=n,this.smcAddress=a,this.kardiaClient=r,this.kardiaAccount=r.account,this.kardiaContract=r.contract,this.kardiaTransaction=r.transaction,this.kardiaChain=r.kaiChain,this.kardiaKrc20=r.krc20};!function(e){e[e.ROUND_DOWN=0]="ROUND_DOWN",e[e.ROUND_HALF_UP=1]="ROUND_HALF_UP",e[e.ROUND_UP=2]="ROUND_UP"}(m||(m={}));var w=a.BigInt(1),A=s(r),k=s(i),g=((c={})[m.ROUND_DOWN]=0,c[m.ROUND_HALF_UP]=1,c[m.ROUND_UP]=2,c),I=((f={})[m.ROUND_DOWN]=0,f[m.ROUND_HALF_UP]=1,f[m.ROUND_UP]=2,f);function x(e){return e instanceof a?e:a.BigInt(Number(e))}var M,O,E=function(){function e(e,t){void 0===t&&(t=w),this.numerator=x(e),this.denominator=x(t)}var t=e.prototype;return t.invert=function(){return new e(this.denominator,this.numerator)},t.add=function(t){var n=t instanceof e?t:new e(x(t));return a.equal(this.denominator,n.denominator)?new e(a.add(this.numerator,n.numerator),this.denominator):new e(a.add(a.multiply(this.numerator,n.denominator),a.multiply(n.numerator,this.denominator)),a.multiply(this.denominator,n.denominator))},t.subtract=function(t){var n=t instanceof e?t:new e(x(t));return a.equal(this.denominator,n.denominator)?new e(a.subtract(this.numerator,n.numerator),this.denominator):new e(a.subtract(a.multiply(this.numerator,n.denominator),a.multiply(n.numerator,this.denominator)),a.multiply(this.denominator,n.denominator))},t.lessThan=function(t){var n=t instanceof e?t:new e(x(t));return a.lessThan(a.multiply(this.numerator,n.denominator),a.multiply(n.numerator,this.denominator))},t.equalTo=function(t){var n=t instanceof e?t:new e(x(t));return a.equal(a.multiply(this.numerator,n.denominator),a.multiply(n.numerator,this.denominator))},t.greaterThan=function(t){var n=t instanceof e?t:new e(x(t));return a.greaterThan(a.multiply(this.numerator,n.denominator),a.multiply(n.numerator,this.denominator))},t.multiply=function(t){var n=t instanceof e?t:new e(x(t));return new e(a.multiply(this.numerator,n.numerator),a.multiply(this.denominator,n.denominator))},t.divide=function(t){var n=t instanceof e?t:new e(x(t));return new e(a.multiply(this.numerator,n.denominator),a.multiply(this.denominator,n.numerator))},t.toSignificant=function(e,t,n){void 0===t&&(t={groupSeparator:""}),void 0===n&&(n=m.ROUND_HALF_UP),A.set({precision:e+1,rounding:g[n]});var a=new A(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return a.toFormat(a.decimalPlaces(),t)},t.toFixed=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t={groupSeparator:""}),void 0===n&&(n=m.ROUND_HALF_UP),k.DP=e,k.RM=I[n],new k(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,t)},y(e,[{key:"quotient",get:function(){return a.divide(this.numerator,this.denominator)}},{key:"remainder",get:function(){return new e(a.remainder(this.numerator,this.denominator),this.denominator)}}]),e}(),_=function(e){if(!(e&&e.length&&e[0]&&t.KardiaAccount.isAddress(e[0])&&e[1]&&t.KardiaAccount.isAddress(e[1])))throw new Error("Invalid token address!")},B=function(e){function n(){var n;return(n=e.apply(this,arguments)||this).getReserves=function(){var e=p(h.mark((function e(a,r){return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.KardiaAccount.isAddress(a)&&t.KardiaAccount.isAddress(r)){e.next=2;break}throw new Error("Invalid token!");case 2:return e.abrupt("return",n.smcCallData({abi:n.abi,contractAddr:n.smcAddress,methodName:"getReserves",params:[a,r]}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.getAmountsOut=function(){var e=p(h.mark((function e(t,r){var i;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Invalid input amount!");case 2:return _(r),e.next=5,n.smcCallData({abi:n.abi,contractAddr:n.smcAddress,methodName:"getAmountsOut",params:[t,r]});case 5:return e.abrupt("return",(i=e.sent)&&i.length>0?a.BigInt(i[1]).toString():"");case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.getAmountsIn=function(){var e=p(h.mark((function e(t,r){var i;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Invalid input amount!");case 2:return _(r),e.next=5,n.smcCallData({abi:n.abi,contractAddr:n.smcAddress,methodName:"getAmountsIn",params:[t,r]});case 5:return e.abrupt("return",(i=e.sent)&&i.length>0?a.BigInt(i[0]).toString():"");case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n}return l(n,e),n}(b),N=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).getPair=function(e,n){if(!e.trim()||!n.trim())throw new Error("Invalid token!");return t.smcCallData({abi:t.abi,contractAddr:t.smcAddress,methodName:"getPair",params:[e,n]})},t}return l(t,e),t}(b),K=function(e){function n(){var n;return(n=e.apply(this,arguments)||this).getAllowance=function(){var e=p(h.mark((function e(r,i,s){return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.KardiaAccount.isAddress(r)){e.next=2;break}throw new Error("Invalid token Address");case 2:if(t.KardiaAccount.isAddress(i)){e.next=4;break}throw new Error("Invalid wallet address");case 4:return e.next=6,n.smcCallData({abi:n.abi,contractAddr:r,methodName:"allowance",params:[i,s]});case 6:return e.abrupt("return",a.BigInt(e.sent));case 8:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),n.balanceOf=function(e,a){if(!t.KardiaAccount.isAddress(e))throw new Error("Invalid token Address");if(!t.KardiaAccount.isAddress(a))throw new Error("Invalid wallet address");return n.smcCallData({abi:n.abi,methodName:"balanceOf",contractAddr:e,params:[a]})},n}return l(n,e),n.prototype.getTotalSupply=function(e){if(!t.KardiaAccount.isAddress(e))throw new Error("Invalid token Address");return this.smcCallData({abi:this.abi,contractAddr:e,methodName:"totalSupply",params:[]})},n}(b),L=a.BigInt(0),S=a.BigInt(1),F=new E(1),P=function(e,t){return void 0===t&&(t=18),new u.BigNumber(e).multipliedBy(new u.BigNumber(Math.pow(10,t))).toFixed(0,1)},D=a.BigInt(9975),C=a.BigInt(1e4),q={cellValue:P,convertValueFollowDecimal:function(e,t){try{if(!e||"0"===e)return"0";if(!t)return e;var n=new u.BigNumber(e),a=new u.BigNumber(10);return function(e){var t=e.toString().replace(/^[0]+/,"");return t.indexOf(".")>-1&&(t=t.replace(/[0]+$/,"")),0===(t=t.replace(/[.]$/,"")).indexOf(".")&&(t="0"+t),t||"0"}(n.dividedBy(a.exponentiatedBy(t)).toFixed(t))}catch(e){return console.error("Error converting value from decimal:",e),"0"}},calculateSlippageValue:function(e,t,n){try{var a,r=new E(e),i=new E(P(t),P(100));if("sub"===n){if(Number(t)>100)return"0";a=F.subtract(i)}else a=F.add(i);return r.multiply(a).toFixed()}catch(e){return console.error("Error calculating slippage value:",e),""}},calculateLiquidityProvidersFee:function(e){return new E(e).multiply(3).divide(1e3).toFixed()},renderPair:function(e,t){if(!e||!t)throw new Error("Error render pair: token not found!");return[e,t]}},R=function(){function e(e){var a=this;void 0===e&&(e={abis:{},smcAddresses:{},rpcEndpoint:""}),this.isKAI=function(e){return!(!e||!a.smcAddresses.wkai||e.toLowerCase()!==a.smcAddresses.wkai.toLowerCase())},this.transformAddLiquidityParams=function(e){var n=e.slippageTolerance,a=e.txDeadline,r=e.inputAmount,i=e.outputAmount,s=e.tokenA,u=e.tokenB,o=e.walletAddress;if(!t.KardiaAccount.isAddress(o))throw new Error("Invalid wallet address");if(!t.KardiaAccount.isAddress(s.tokenAddress)||!t.KardiaAccount.isAddress(u.tokenAddress))throw new Error("Invalid token address");var p=r?q.cellValue(r,s.decimals):"0",d=i?q.cellValue(i,u.decimals):"0",y=r?q.calculateSlippageValue(p,n,"sub"):"0",l=i?q.calculateSlippageValue(d,n,"sub"):"0";if(!(p&&y&&d&&l))throw new Error("Invalid token amount");if(!a)throw new Error("Invalid deadline");return{tokenA:s.tokenAddress,tokenB:u.tokenAddress,amountADesired:p,amountBDesired:d,amountAMin:y,amountBMin:l,walletAddress:o,deadlineInMilliseconds:a}},this.transformAddLiquidityKAIParams=function(e){var n=a.transformAddLiquidityParams(e),r=n.amountADesired,i=n.amountBDesired,s=n.amountAMin,u=n.amountBMin,o=n.tokenA,p=n.tokenB,d=n.walletAddress,y=n.deadlineInMilliseconds,l=a.isKAI(o)?p:o,m=a.isKAI(o)?i:r,c=a.isKAI(o)?u:s,f=a.isKAI(o)?r:i,T=a.isKAI(o)?s:u;if(!t.KardiaAccount.isAddress(d))throw new Error("Invalid wallet address");if(!t.KardiaAccount.isAddress(o)||!t.KardiaAccount.isAddress(p))throw new Error("Invalid token address");if(!(r&&s&&i&&u))throw new Error("Invalid token amount");if(!y)throw new Error("Invalid deadline");return{tokenAddress:l,amountTokenMin:c,amountTokenDesired:m,amountKAI:f,amountKAIMin:T,walletAddress:d,deadlineInMilliseconds:y}},this.transformRemoveLiquidityParams=function(){var e=p(h.mark((function e(t){var n,r,i,s,u,o,p,d,y,l,m,c,f,T,v,b,w;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.withdrawAmount,i=t.walletAddress,s=t.slippageTolerance,u=t.txDeadline,o=(n=t.pair).tokenA,p=n.tokenB,d=n.pairAddress,e.next=4,a.krc20.balanceOf(d,i);case 4:if(y=e.sent,Number(r)){e.next=7;break}throw new Error("Invalid amount!");case 7:if(i){e.next=9;break}throw new Error("Invalid wallet!");case 9:if(Number(y)&&!(Number(r)>Number(y))){e.next=11;break}throw new Error("Not enough balance!");case 11:return e.next=13,a.krc20.getTotalSupply(d);case 13:return l=e.sent,m=new E(r).divide(y).multiply(100),e.next=17,a.krc20.balanceOf(o.tokenAddress,d);case 17:return c=e.sent,f=new E(y).divide(l).multiply(c).multiply(m).divide(100).toFixed(),T=q.calculateSlippageValue(f,s,"sub"),e.next=22,a.krc20.balanceOf(p.tokenAddress,d);case 22:return v=e.sent,b=new E(y).divide(l).multiply(v).multiply(m).divide(100).toFixed(),w=q.calculateSlippageValue(b,s,"sub"),e.abrupt("return",{tokenA:o.tokenAddress,tokenB:p.tokenAddress,liquidity:r,amountAMin:T,amountBMin:w,walletAddress:i,deadlineInMilliseconds:u});case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.transformRemoveLiquidityKAIParams=function(){var e=p(h.mark((function e(t){var n,r,i,s,u,o,p,d,y,l,m;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.transformRemoveLiquidityParams(t);case 2:return i=(n=e.sent).tokenB,s=n.liquidity,u=n.amountAMin,o=n.amountBMin,p=n.walletAddress,d=n.deadlineInMilliseconds,y=a.isKAI(r=n.tokenA)?i:r,l=a.isKAI(r)?u:o,m=a.isKAI(r)?o:u,e.abrupt("return",{tokenAddress:y,liquidity:s,amountKAIMin:l,amountTokenMin:m,walletAddress:p,deadlineInMilliseconds:d});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.invokeSMC=function(){var e=p(h.mark((function e(t){var n,r,i,s,u,o,p,d,y,l,m;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.smcAddr,i=t.methodName,s=t.params,o=void 0===(u=t.amount)?0:u,d=void 0===(p=t.gasLimit)?5e6:p,l=void 0===(y=t.gasPrice)?1:y,m="string"==typeof(n=t.abi)?JSON.parse(n):JSON.parse(JSON.stringify(n)),a.kardiaClient.contract.updateAbi(m),e.next=5,a.kardiaClient.contract.invokeContract(i,s).txData();case 5:return e.abrupt("return",a.kardiaClient.transaction.sendTransactionToExtension({gas:d,gasPrice:l,value:o,to:r,data:e.sent},!0));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var r=e.abis,i=e.rpcEndpoint,s=e.smcAddresses;this.abiJSON={router:r&&r.router||v.ROUTER,factory:r&&r.factory||v.FACTORY,krc20:r&&r.krc20||v.KRC20,limitOrder:r&&r.limitOrder||v.LIMIT_ORDER},this.smcAddresses={router:s&&s.router||"0xD15afC6d61eD34d968176397a89fE5Cbd824D493",factory:s&&s.factory||"0x053Fdaff144a44731f2D9B3847947a9f1c1487Cc",limitOrder:s&&s.limitOrder||"0x3E88CE7E64Bb2763CB8e40CF0d6eb9669f391A6b",wkai:s&&s.wkai||"0xbedD01A19B321C01279167709DfF6c7419Eb8AC7"},this.kardiaClient=new n({endpoint:i||"https://dev-1.kardiachain.io"}),this.factory=new N({abi:this.abiJSON.factory,smcAddress:this.smcAddresses.factory,client:this.kardiaClient}),this.router=new B({abi:this.abiJSON.router,smcAddress:this.smcAddresses.router,client:this.kardiaClient}),this.krc20=new K({abi:this.abiJSON.krc20,client:this.kardiaClient,smcAddress:""})}return y(e,[{key:"abis",get:function(){return this.abiJSON}},{key:"addresses",get:function(){return this.smcAddresses}}]),e}();(M=exports.TradeType||(exports.TradeType={}))[M.BUY=0]="BUY",M[M.SELL=1]="SELL",(O=exports.InputType||(exports.InputType={}))[O.EXACT_IN=0]="EXACT_IN",O[O.EXACT_OUT=1]="EXACT_OUT";var U=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).getPair=function(e,n){return t.factory.getPair(e,n)},t.getReserves=function(e,n){return t.router.getReserves(e,n)},t.getApprovalState=function(){var e=p(h.mark((function e(n){var r,i,s,u,o;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.decimals,s=n.walletAddress,u=n.spenderAddress,o=n.amountToCheck,!t.isKAI(r=n.tokenAddr)){e.next=3;break}return e.abrupt("return",!0);case 3:return e.next=5,t.krc20.getAllowance(r,s,u);case 5:return e.abrupt("return",!a.lessThan(e.sent,a.BigInt(q.cellValue(o,i))));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getTokenBalance=function(e,n){return t.krc20.balanceOf(e,n)},t.addLiquidityCallParameters=function(e){var n=e.tokenB;if(t.isKAI(e.tokenA.tokenAddress)||t.isKAI(n.tokenAddress)){var a=t.transformAddLiquidityKAIParams(e);return{methodName:"addLiquidityKAI",args:[a.tokenAddress,a.amountTokenDesired,a.amountTokenMin,a.amountKAIMin,a.walletAddress,a.deadlineInMilliseconds],amount:a.amountKAI}}var r=t.transformAddLiquidityParams(e);return{methodName:"addLiquidity",args:[r.tokenA,r.tokenB,r.amountADesired,r.amountBDesired,r.amountAMin,r.amountBMin,r.walletAddress,r.deadlineInMilliseconds]}},t.removeLiquidityCallParameters=function(){var e=p(h.mark((function e(n){var a,r,i,s;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(a=n.pair).tokenB,!t.isKAI(a.tokenA.tokenAddress)&&!t.isKAI(r.tokenAddress)){e.next=12;break}return e.next=4,t.transformRemoveLiquidityKAIParams(n);case 4:return e.abrupt("return",{methodName:"removeLiquidityKAI",args:[(i=e.sent).tokenAddress,i.liquidity,i.amountTokenMin,i.amountKAIMin,i.walletAddress,i.deadlineInMilliseconds]});case 12:return e.next=14,t.transformRemoveLiquidityParams(n);case 14:return e.abrupt("return",{methodName:"removeLiquidity",args:[(s=e.sent).tokenA,s.tokenB,s.liquidity,s.amountAMin,s.amountBMin,s.walletAddress,s.deadlineInMilliseconds]});case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.calculateOutputAmount=function(e){var n,a=e.amount,r=e.inputToken,i=e.reserveIn,s=e.outputToken,u=e.reserveOut,o=e.inputType;if(!a||!r||!s)throw new Error("Params input error.");var p,d="";switch(o){case exports.InputType.EXACT_IN:n=q.cellValue(a,r.decimals),d=t.getOutputAmount(n,i,u),p=s.decimals;break;case exports.InputType.EXACT_OUT:n=q.cellValue(a,s.decimals),d=t.getInputAmount(n,i,u),p=r.decimals}return q.convertValueFollowDecimal(d,p)},t.calculatePriceImpact=function(){var e=p(h.mark((function e(n){var r,i,s,u,o,p,d,y,l,m,c,f,T,v,b,w,A,k,g,I;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.outputToken,s=n.amountIn,u=n.amountOut,(r=n.inputToken)&&i&&s&&u){e.next=3;break}throw new Error("Params input error.");case 3:return o=r.decimals,p=r.tokenAddress,d=i.decimals,y=i.tokenAddress,e.next=7,t.router.getReserves(p,y);case 7:if(c=(l=e.sent).reserveB,(m=l.reserveA)&&"0"!==m&&c&&"0"!==c){e.next=12;break}return e.abrupt("return","0");case 12:return f=q.cellValue(s,o),T=q.cellValue(u,d),v=o?new E(a.BigInt(m),a.exponentiate(a.BigInt(10),a.BigInt(o))):new E(a.BigInt(m)),b=d?new E(a.BigInt(c),a.exponentiate(a.BigInt(10),a.BigInt(d))):new E(a.BigInt(c)),w=b.divide(v),A=new E(f,a.exponentiate(a.BigInt(10),a.BigInt(o))),k=new E(T,a.exponentiate(a.BigInt(10),a.BigInt(d))),g=w.multiply(A),I=g.subtract(k).divide(g),e.abrupt("return",I.multiply(100).toFixed(5));case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.calculateExchangeRate=function(){var e=p(h.mark((function e(n,r){var i,s,u,o,p,d;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.router.getReserves(n.tokenAddress,r.tokenAddress);case 2:return s=(i=e.sent).reserveB,u=q.convertValueFollowDecimal(a.BigInt(i.reserveA).toString(),n.decimals),o=q.convertValueFollowDecimal(a.BigInt(s).toString(),r.decimals),p=Number(u),d=Number(o),e.abrupt("return",{rateAB:p?d/p:0,rateBA:d?p/d:0});case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t.marketSwapCallParameters=function(e){var n=e.amountIn,a=e.amountOut,r=e.inputToken,i=e.outputToken,s=e.addressTo,u=e.inputType,o=e.txDeadline,p=e.slippageTolerance,d=e.feeOnTransfer;if(!(n&&a&&s&&r&&i))throw new Error("Params input error.");var y=t.isKAI(r.tokenAddress),l=t.isKAI(i.tokenAddress),m=q.cellValue(n,r.decimals),c=q.cellValue(a,i.decimals),f=q.calculateSlippageValue(c,p,"sub"),T=q.calculateSlippageValue(m,p,"add"),h=q.renderPair(r.tokenAddress,i.tokenAddress),v={};switch(u){case exports.InputType.EXACT_IN:v=y?{methodName:d?"swapExactKAIForTokensSupportingFeeOnTransferTokens":"swapExactKAIForTokens",args:[f,h,s,o],amount:m}:l?{methodName:d?"swapExactTokensForKAISupportingFeeOnTransferTokens":"swapExactTokensForKAI",args:[m,f,h,s,o]}:{methodName:d?"swapExactTokensForTokensSupportingFeeOnTransferTokens":"swapExactTokensForTokens",args:[m,f,h,s,o]};break;case exports.InputType.EXACT_OUT:v=y?{methodName:"swapKAIForExactTokens",args:[c,h,s,o],amount:T}:l?{methodName:"swapTokensForExactKAI",args:[c,T,h,s,o]}:{methodName:"swapTokensForExactTokens",args:[c,T,h,s,o]}}return v},t.limitOrderCallParameters=function(e){var n=e.amountIn,a=e.amountOut,r=e.inputToken,i=e.outputToken,s=e.inputType,u=e.tradeType;if(!(n&&a&&r&&i))throw new Error("Params input error.");var o=r.tokenAddress,p=i.tokenAddress,d=i.decimals,y=q.cellValue(n,r.decimals),l=q.cellValue(a,d);return t.isKAI(r.tokenAddress)?{methodName:"orderInputKAI",args:[p,l,s,u],amount:y}:{methodName:"orderInputTokens",args:[o,y,p,l,s,u]}},t.cancelLimitOrder=function(e){var t=e.pairAddr,n=e.orderID;if(!t||!n)throw new Error("Params input error.");return{methodName:"cancelOrder",args:[t,n]}},t}l(t,e);var n=t.prototype;return n.getOutputAmount=function(e,t,n){var r=a.BigInt(t),i=a.BigInt(n);if(a.equal(r,L)||a.equal(i,L))throw new Error("Insufficient reserves error.");var s=a.multiply(a.BigInt(e),D),u=a.multiply(s,i),o=a.add(a.multiply(r,C),s);return a.divide(u,o).toString()},n.getInputAmount=function(e,t,n){var r=a.BigInt(t),i=a.BigInt(n);if(a.equal(r,L)||a.equal(i,L)||a.greaterThanOrEqual(a.BigInt(e),i))throw new Error("Insufficient reserves error.");var s=a.multiply(a.multiply(r,a.BigInt(e)),C),u=a.multiply(a.subtract(i,a.BigInt(e)),D);return a.add(a.divide(s,u),S).toString()},t}(R);exports.Fraction=E,exports.KRC20Service=K,exports.KaidexClient=U,exports.Utils=q,exports.default=U;
//# sourceMappingURL=kaidex-sdk.cjs.production.min.js.map
